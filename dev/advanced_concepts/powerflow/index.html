<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>PTDF-Based Powerflow · SpineOpt.jl</title><meta name="title" content="PTDF-Based Powerflow · SpineOpt.jl"/><meta property="og:title" content="PTDF-Based Powerflow · SpineOpt.jl"/><meta property="twitter:title" content="PTDF-Based Powerflow · SpineOpt.jl"/><meta name="description" content="Documentation for SpineOpt.jl."/><meta property="og:description" content="Documentation for SpineOpt.jl."/><meta property="twitter:description" content="Documentation for SpineOpt.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/style.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="SpineOpt.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">SpineOpt.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../getting_started/installation/">Installation</a></li><li><a class="tocitem" href="../../getting_started/setup_workflow/">Setting up a workflow</a></li><li><a class="tocitem" href="../../getting_started/creating_your_own_model/">Creating Your Own Model</a></li><li><a class="tocitem" href="../../getting_started/archetypes/">Archetypes</a></li><li><a class="tocitem" href="../../getting_started/output_data/">Managing Outputs</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorial/webinars/">Webinars</a></li><li><a class="tocitem" href="../../tutorial/simple_system/">Simple system</a></li><li><a class="tocitem" href="../../tutorial/reserves/">Reserve requirements</a></li><li><a class="tocitem" href="../../tutorial/ramping/">Ramping constraints</a></li><li><a class="tocitem" href="../../tutorial/unit_commitment/">Unit Commitment</a></li><li><a class="tocitem" href="../../tutorial/tutorialTwoHydro/">Two hydro plants</a></li><li><a class="tocitem" href="../../tutorial/case_study_a5/">Case Study A5</a></li></ul></li><li><span class="tocitem">How to</span><ul><li><a class="tocitem" href="../../how_to/change_the_solver/">Change the solver</a></li><li><a class="tocitem" href="../../how_to/define_an_efficiency/">Define an efficiency</a></li><li><a class="tocitem" href="../../how_to/print_the_model/">Print the model</a></li></ul></li><li><span class="tocitem">Concept Reference</span><ul><li><a class="tocitem" href="../../concept_reference/the_basics/">Basics of the model structure</a></li><li><a class="tocitem" href="../../concept_reference/Object Classes/">Object Classes</a></li><li><a class="tocitem" href="../../concept_reference/Relationship Classes/">Relationship Classes</a></li><li><a class="tocitem" href="../../concept_reference/Parameters/">Parameters</a></li><li><a class="tocitem" href="../../concept_reference/Parameter Value Lists/">Parameter Value Lists</a></li></ul></li><li><span class="tocitem">Mathematical Formulation</span><ul><li><a class="tocitem" href="../../mathematical_formulation/variables/">Variables</a></li><li><a class="tocitem" href="../../mathematical_formulation/constraints_automatically_generated/">Constraints</a></li><li><a class="tocitem" href="../../mathematical_formulation/objective_function/">Objective</a></li></ul></li><li><span class="tocitem">Advanced Concepts</span><ul><li><a class="tocitem" href="../temporal_framework/">Temporal Framework</a></li><li><a class="tocitem" href="../stochastic_framework/">Stochastic Framework</a></li><li><a class="tocitem" href="../unit_commitment/">Unit Commitment</a></li><li><a class="tocitem" href="../ramping/">Ramping</a></li><li><a class="tocitem" href="../reserves/">Reserves</a></li><li><a class="tocitem" href="../investment_optimization/">Investment Optimization</a></li><li><a class="tocitem" href="../user_constraints/">User Constraints</a></li><li><a class="tocitem" href="../decomposition/">Decomposition</a></li><li class="is-active"><a class="tocitem" href>PTDF-Based Powerflow</a><ul class="internal"><li><a class="tocitem" href="#key-concepts-advanced-ptdf-DC"><span>Key concepts</span></a></li></ul></li><li><a class="tocitem" href="../pressure_driven_gas_transfer/">Pressure driven gas transfer</a></li><li><a class="tocitem" href="../Lossless_DC_power_flow/">Lossless nodal DC power flows</a></li><li><a class="tocitem" href="../representative_days_w_seasonal_storage/">Representative days with seasonal storages</a></li><li><a class="tocitem" href="../cumulated_flow_restrictions/">Imposing renewable energy targets</a></li><li><a class="tocitem" href="../mga/">Modelling to generate alternatives</a></li></ul></li><li><span class="tocitem">Implementation details</span><ul><li><a class="tocitem" href="../../implementation_details/documentation/">Documentation</a></li><li><a class="tocitem" href="../../implementation_details/how_does_the_model_update_itself/">How does the model update itself</a></li><li><a class="tocitem" href="../../implementation_details/how_to_write_a_constraint/">How to write a constraint</a></li><li><a class="tocitem" href="../../implementation_details/time_slices/">Time slices</a></li></ul></li><li><a class="tocitem" href="../../library/">Library</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Advanced Concepts</a></li><li class="is-active"><a href>PTDF-Based Powerflow</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>PTDF-Based Powerflow</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/spine-tools/SpineOpt.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/spine-tools/SpineOpt.jl/blob/master/docs/src/advanced_concepts/powerflow.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="ptdf-based-powerflow"><a class="docs-heading-anchor" href="#ptdf-based-powerflow">Power transfer distribution factors (PTDF) based DC power flow</a><a id="ptdf-based-powerflow-1"></a><a class="docs-heading-anchor-permalink" href="#ptdf-based-powerflow" title="Permalink"></a></h1><p>There are two main methodologies for directly including DC powerflow in unit commitment/energy system models. One method is to directly include the bus voltage angles as variables in the model. This method is described in <a href="../Lossless_DC_power_flow/#key-concepts-advanced-nodal-DC">Nodal lossless DC Powerflow</a>.</p><p>Here we discuss the method of using power transfer distribution factors (PTDF) for DC power flow and line outage distribution factors (lodf) for security constrained unit commitment.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>The calculations for investments using the PTDF method do not consider the mutual effect of multiple simultaneous investments. In other words, the results are (increasingly more) incorrect for (more) lines that interact with each other. Yet, this method remains useful for choosing between multiple simultaneous investments that are assumed non-interacting and/or multiple mutually exclusive investments.</p><p>On the other hand, investments using the angle based method work for multiple lines but this method is slower and does not take into account the N-1 rule.</p></div></div><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Connecting AC lines through two  DC lines is also not supported in our implementation of the PTDF method but it is possible to do this with our implementation of the angle based method.</p></div></div><h2 id="key-concepts-advanced-ptdf-DC"><a class="docs-heading-anchor" href="#key-concepts-advanced-ptdf-DC">Key concepts</a><a id="key-concepts-advanced-ptdf-DC-1"></a><a class="docs-heading-anchor-permalink" href="#key-concepts-advanced-ptdf-DC" title="Permalink"></a></h2><ol><li><strong>ptdf</strong>: The power transfer distribution factors are a property of the network reactances and their derivation may be found <a href="https://www.worldcat.org/title/power-generation-operation-and-control/oclc/886509477">here</a>. <code>ptdf(n, c)</code> represents the fraction of an injection at <a href="../../concept_reference/Object Classes/#node">node</a> n that will flow on <a href="../../concept_reference/Object Classes/#connection">connection</a> c. The flow on <a href="../../concept_reference/Object Classes/#connection">connection</a> c is then the sum over all nodes of <code>ptdf(n, c)*net_injection(c)</code>. The advantage of this method is that it introduces no additional variables into the problem and instead, introduces only one constraint for each connection whose flow we are interested in monitoring.</li><li><strong>lodf</strong>: Line outage distribution factors are a function of the network ptdfs and their derivation is also found <a href="https://www.worldcat.org/title/power-generation-operation-and-control/oclc/886509477">here</a>. <code>lodf(c_contingency, c_monitored)</code> represents the fraction of the pre-contingency flow on connection <code>c_contingency</code> that will flow on <code>c_monitored</code> if <code>c_contingency</code> is disconnected. Therefore, the post contingency flow on connection <code>c_monitored</code> is the <code>pre_contingency flow</code> plus <code>lodf(c_contingency, c_monitored)\*pre_contingency_flow(c_contingency))</code>. Therefore, consideration of N contingencies on M monitored lines introduces N x M constraints into the model. Usually one wishes to contain this number and methods are given below to achieve this.</li><li><strong>Defining your network</strong> To identify the network for which ptdfs, lodfs and connection_flows will be calculated according to the ptdf method, one does the following:<ul><li>Create <a href="../../concept_reference/Object Classes/#node">node</a> objects for each bus in the model.</li><li>Create <a href="../../concept_reference/Object Classes/#connection">connection</a> objects representing each line of the network: For each connection specify the <a href="../../concept_reference/Parameters/#connection_reactance">connection_reactance</a> parameter and the <a href="../../concept_reference/Parameters/#connection_type">connection_type</a> parameter. Setting <a href="../../concept_reference/Parameters/#connection_type">connection_type</a>=<code>connection_type_lossless_bidirectional</code> simplifies the amount of data that needs to be specified for an eletrical network. See <a href="../../concept_reference/Parameters/#connection_type">connection_type</a> for more details   </li><li>Set the <a href="../../concept_reference/Relationship Classes/#connection__to_node">connection__to_node</a> and <a href="../../concept_reference/Relationship Classes/#connection__from_node">connection__from_node</a> relationships to define the topology of each connection along with the <a href="../../concept_reference/Parameters/#connection_capacity">connection_capacity</a> parameter on one or both of these relationships.</li><li>Set the <a href="../../concept_reference/Parameters/#connection_emergency_capacity">connection_emergency_capacity</a> parameter to define the post contingency rating if lodf-based N-1 security constraints are to be included</li><li>Create a <a href="../../concept_reference/Object Classes/#commodity">commodity</a> object and <a href="../../concept_reference/Relationship Classes/#node__commodity">node__commodity</a> relationships for all the nodes that comprise the electrical network for which PTDFs are to be calculated.</li><li>Specify the <a href="../../concept_reference/Parameters/#commodity_physics">commodity_physics</a> parameter for the commodity to <code>:commodity_physics_ptdf</code> if ptdf-based DC load flow is desired with no N-1 security constraints or to <code>:commodity_physics_lodf</code> if it is desired to include lodf-based N-1 security constraints</li><li>To identify the reference bus(<a href="../../concept_reference/Object Classes/#node">node</a>) specify the <a href="../../concept_reference/Parameters/#node_opf_type">node_opf_type</a> parameter for the appropriate <a href="../../concept_reference/Object Classes/#node">node</a> with the value <code>node_opf_type_reference</code>.</li></ul></li><li><strong>Controlling problem size</strong><ul><li>The lines to be monitored are specified by setting the <a href="../../concept_reference/Parameters/#connection_monitored">connection_monitored</a> property for each connection for which a flow constraint is to be generated</li><li>The contingencies to be considered are specified by setting the <a href="../../concept_reference/Parameters/#connection_contingency">connection_contingency</a> property for the appropriate connections. For N contingencies and M monitored lines, N x M constraints will be generated.</li><li>If the <code>lodf(c_contingency, c_monitored)</code> is very small, it means the outage of <code>c_contingency</code> has a small impact on the flow on <code>c_monitored</code>and there is little point in including this constraint in the model. This can be achieved by setting the <code>commodity_lodf_tolerance</code> <a href="../../concept_reference/Object Classes/#commodity">commodity</a> parameter. Contingency / Monotired line combinations with lodfs below this value will be ignored, reducing the size of the model.</li><li>If <code>ptdf(n, c)</code> is very small, it means an injection at n has a small impact on the flow on c and there is little point in considering it. This can be achieved by setting the <code>commodity_ptdf_threshold</code> <a href="../../concept_reference/Object Classes/#commodity">commodity</a> parameter. Node / Monotired line combinations with ptdfs below this value will be ignored, reducing the number of coefficients in the model.</li><li>To more easily identify which connections are worth being monitored or which contingencies are worth being considered, you can add the <code>contingency_is_binding</code> output to any of your <a href="../../concept_reference/Object Classes/#report">report</a>s (via a <a href="../../concept_reference/Relationship Classes/#report__output">report__output</a> relationship). This will run the model without the security constraints, and instead write a parameter called <code>contingency_is_binding</code> to the output database for each pair of contingency and monitored connection. The value of the parameter will be a (possibly stochastic) time-series where a value of one will indicate that the corresponding security constraint is binding, and zero otherwise.</li></ul></li></ol></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../decomposition/">« Decomposition</a><a class="docs-footer-nextpage" href="../pressure_driven_gas_transfer/">Pressure driven gas transfer »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Monday 11 March 2024 10:44">Monday 11 March 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
