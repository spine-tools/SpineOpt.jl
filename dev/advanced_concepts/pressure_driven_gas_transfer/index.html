<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Pressure driven gas transfer · SpineOpt.jl</title><meta name="title" content="Pressure driven gas transfer · SpineOpt.jl"/><meta property="og:title" content="Pressure driven gas transfer · SpineOpt.jl"/><meta property="twitter:title" content="Pressure driven gas transfer · SpineOpt.jl"/><meta name="description" content="Documentation for SpineOpt.jl."/><meta property="og:description" content="Documentation for SpineOpt.jl."/><meta property="twitter:description" content="Documentation for SpineOpt.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/style.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="SpineOpt.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">SpineOpt.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../getting_started/installation/">Installation</a></li><li><a class="tocitem" href="../../getting_started/setup_workflow/">Setting up a workflow</a></li><li><a class="tocitem" href="../../getting_started/creating_your_own_model/">Creating Your Own Model</a></li><li><a class="tocitem" href="../../getting_started/archetypes/">Archetypes</a></li><li><a class="tocitem" href="../../getting_started/output_data/">Managing Outputs</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorial/webinars/">Webinars</a></li><li><a class="tocitem" href="../../tutorial/simple_system/">Simple system</a></li><li><a class="tocitem" href="../../tutorial/reserves/">Reserve requirements</a></li><li><a class="tocitem" href="../../tutorial/ramping/">Ramping constraints</a></li><li><a class="tocitem" href="../../tutorial/unit_commitment/">Unit Commitment</a></li><li><a class="tocitem" href="../../tutorial/tutorialTwoHydro/">Two hydro plants</a></li><li><a class="tocitem" href="../../tutorial/case_study_a5/">Case Study A5</a></li></ul></li><li><span class="tocitem">How to</span><ul><li><a class="tocitem" href="../../how_to/change_the_solver/">Change the solver</a></li><li><a class="tocitem" href="../../how_to/define_an_efficiency/">Define an efficiency</a></li><li><a class="tocitem" href="../../how_to/print_the_model/">Print the model</a></li></ul></li><li><span class="tocitem">Concept Reference</span><ul><li><a class="tocitem" href="../../concept_reference/the_basics/">Basics of the model structure</a></li><li><a class="tocitem" href="../../concept_reference/Object Classes/">Object Classes</a></li><li><a class="tocitem" href="../../concept_reference/Relationship Classes/">Relationship Classes</a></li><li><a class="tocitem" href="../../concept_reference/Parameters/">Parameters</a></li><li><a class="tocitem" href="../../concept_reference/Parameter Value Lists/">Parameter Value Lists</a></li></ul></li><li><span class="tocitem">Mathematical Formulation</span><ul><li><a class="tocitem" href="../../mathematical_formulation/variables/">Variables</a></li><li><a class="tocitem" href="../../mathematical_formulation/constraints_automatically_generated/">Constraints</a></li><li><a class="tocitem" href="../../mathematical_formulation/objective_function/">Objective</a></li></ul></li><li><span class="tocitem">Advanced Concepts</span><ul><li><a class="tocitem" href="../temporal_framework/">Temporal Framework</a></li><li><a class="tocitem" href="../stochastic_framework/">Stochastic Framework</a></li><li><a class="tocitem" href="../unit_commitment/">Unit Commitment</a></li><li><a class="tocitem" href="../ramping/">Ramping</a></li><li><a class="tocitem" href="../reserves/">Reserves</a></li><li><a class="tocitem" href="../investment_optimization/">Investment Optimization</a></li><li><a class="tocitem" href="../user_constraints/">User Constraints</a></li><li><a class="tocitem" href="../decomposition/">Decomposition</a></li><li><a class="tocitem" href="../powerflow/">PTDF-Based Powerflow</a></li><li class="is-active"><a class="tocitem" href>Pressure driven gas transfer</a><ul class="internal"><li><a class="tocitem" href="#key-concepts-advanced-gas"><span>Key concept</span></a></li></ul></li><li><a class="tocitem" href="../Lossless_DC_power_flow/">Lossless nodal DC power flows</a></li><li><a class="tocitem" href="../representative_days_w_seasonal_storage/">Representative days with seasonal storages</a></li><li><a class="tocitem" href="../cumulated_flow_restrictions/">Imposing renewable energy targets</a></li><li><a class="tocitem" href="../mga/">Modelling to generate alternatives</a></li><li><a class="tocitem" href="../multi_stage/">Multi-stage optimisation</a></li></ul></li><li><span class="tocitem">Implementation details</span><ul><li><a class="tocitem" href="../../implementation_details/documentation/">Documentation</a></li><li><a class="tocitem" href="../../implementation_details/how_does_the_model_update_itself/">How does the model update itself</a></li><li><a class="tocitem" href="../../implementation_details/how_to_write_a_constraint/">How to write a constraint</a></li><li><a class="tocitem" href="../../implementation_details/time_slices/">Time slices</a></li></ul></li><li><a class="tocitem" href="../../library/">Library</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Advanced Concepts</a></li><li class="is-active"><a href>Pressure driven gas transfer</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Pressure driven gas transfer</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/spine-tools/SpineOpt.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/spine-tools/SpineOpt.jl/blob/master/docs/src/advanced_concepts/pressure_driven_gas_transfer.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="pressure-driven-gas-transfer"><a class="docs-heading-anchor" href="#pressure-driven-gas-transfer">Pressure driven gas transfer</a><a id="pressure-driven-gas-transfer-1"></a><a class="docs-heading-anchor-permalink" href="#pressure-driven-gas-transfer" title="Permalink"></a></h1><p>The generic formulation of SpineOpt is based on a trade based model. However, network physics can be different depending on the traded commodity. This chapter specifically addresses the use of pressure driven gas transfer models and enabling linepack flexibility in SpineOpt. To this date, investments in pressure driven pipelines are not yet supported within SpineOpt. The use of multiple feed-in nodes, e.g. to represent multiple commodity flows through a pipeline is not yet supported.</p><p>For the representation of pressure driven gas transfer, we use the MILP formulation, as described in <a href="https://doi.org/10.1109/PTC.2019.8810632">Schwele - Coordination of Power and Natural Gas Systems: Convexification Approaches for Linepack Modeling</a>. Here, the non-linearities associated with the Weymouth equation are convexified through an outer approximation of the Weymouth equation through fixed pressure points.</p><h2 id="key-concepts-advanced-gas"><a class="docs-heading-anchor" href="#key-concepts-advanced-gas">Key concept</a><a id="key-concepts-advanced-gas-1"></a><a class="docs-heading-anchor-permalink" href="#key-concepts-advanced-gas" title="Permalink"></a></h2><p>Here, we briefly describe the key objects and relationships required to model pressure driven gas transfers in SpineOpt.</p><ol><li><strong><a href="../../concept_reference/Object Classes/#connection">connection</a></strong>: A connection represents the gas pipeline being modelled. Usually the direction of flow is not known a priory. To ensure that the flow through the gas pipeline is unidirectional, the parameter <a href="../../concept_reference/Parameters/#has_binary_gas_flow">has_binary_gas_flow</a> needs to be set to <code>true</code>.</li><li><strong><a href="../../concept_reference/Object Classes/#node">node</a></strong>: Nodes with different characteristics are used for the representation of pressure driven gas transfer.<ul><li>For each connection, there will be two nodes representing the start and end point of the pipeline. Associated with these nodes are the following parameters: the <a href="../../concept_reference/Parameters/#has_pressure">has_pressure</a> parameter, which needs to be set to true, in order to create the variable <a href="../../mathematical_formulation/variables/#node_pressure">node_pressure</a>; the <a href="../../concept_reference/Parameters/#max_node_pressure">max_node_pressure</a> and <a href="../../concept_reference/Parameters/#min_node_pressure">min_node_pressure</a> to constrain the pressure variable.</li><li>To leverage linepack flexibility, a third node is introduced representing the linepack storage of the pipeline. To trigger the storage linepack and hence, <a href="../../mathematical_formulation/variables/#node_state">node_state</a> variables, the <a href="../../concept_reference/Parameters/#has_state">has_state</a> parameter needs to be set to <code>true</code>.</li></ul></li><li><strong><a href="../../concept_reference/Relationship Classes/#connection__to_node">connection__to_node</a> and <a href="../../concept_reference/Relationship Classes/#connection__from_node">connection__from_node</a></strong> To enable flows through the pipeline and into the linepack storage, each <a href="../../concept_reference/Object Classes/#node">node</a> has to have both these relationships in common with the connection pipeline. These relationships will trigger the generation of <a href="../../mathematical_formulation/variables/#connection_flow">connection_flow</a> variables in all possible directions.</li><li><strong><a href="../../concept_reference/Relationship Classes/#connection__node__node">connection__node__node</a></strong> This relationship is key to the pressure driven gas transfer, holding the information about the pipeline characteristics and bringing the elements into interaction.<ul><li>The parameter <a href="../../concept_reference/Parameters/#connection_linepack_constant">connection_linepack_constant</a> holds the linepack constant and triggers the generation of the <a href="@ref constraint_storage_line_pack">line pack storage constraint</a>. Note that the first node should be the linepack storage node, while the second node should be a <a href="../../concept_reference/the_basics/#Introduction-to-groups-of-objects">node_group</a> of both, the start and the end node of the pipeline.</li><li>The linearization of the Weymouth equation through outer approximation relies on the use of fixed pressure points. For this purpose, the two parameters <a href="../../concept_reference/Parameters/#fixed_pressure_constant_1">fixed_pressure_constant_1</a> and <a href="../../concept_reference/Parameters/#fixed_pressure_constant_0">fixed_pressure_constant_0</a> hold the fixed pressure constants and trigger the generation of the <a href="@ref constraint_fixed_node_pressure_point">constraint_fix_node_pressure_point</a>. The constraint introduces the relationship between pressure and gas flows. Note, that the pressure constants should be entered in a way, that the first node represents the origin node, the second node the destination node. Each connection should have a <a href="../../concept_reference/Relationship Classes/#connection__node__node">connection__node__node</a> to each combination of its start and end nodes (and associated parameters). (See <a href="https://doi.org/10.1109/PTC.2019.8810632">Schwele - Coordination of Power and Natural Gas Systems: Convexification Approaches for Linepack Modeling</a>)</li><li>By default, pipelines are considered to be passive. However, a compression station between two pipeline pressure nodes can be represented by defining a <a href="../../concept_reference/Parameters/#compression_factor">compression_factor</a>. The relationship should be defined in such a manner, that the first node represents the sending node, the second node represents the receiving node, which pressure is equal or smaller to the pressure at the sending node times the compression factor.</li><li>Lastly, to ensure the balance between incoming/outgoing flows and flows into the linepack, the ratio between the flows need to be fixed. The average incoming flows of the node group (of the pressure start and end nodes) have to equal the flows into the linepack storage, and vice versa. Therefore, the <a href="../../concept_reference/Parameters/#fix_ratio_out_in_connection_flow">fix_ratio_out_in_connection_flow</a> needs to be set to a value (typically 1) for the (pressure group, linepack storage) node pair, and for the (linepack storage, pressure group) node pair.</li></ul></li></ol><p>A gas pipeline and its connected nodes are illustrated below. A complete mathematical formulation can be found <a href="@ref pressure-driven-gas-transfer-math">here</a>.</p><p><img src="../../figs/linepack_illustration.svg" alt="Illustration of gas pipeline"/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../powerflow/">« PTDF-Based Powerflow</a><a class="docs-footer-nextpage" href="../Lossless_DC_power_flow/">Lossless nodal DC power flows »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Friday 5 April 2024 18:33">Friday 5 April 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
