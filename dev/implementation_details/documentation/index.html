<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Documentation · SpineOpt.jl</title><meta name="title" content="Documentation · SpineOpt.jl"/><meta property="og:title" content="Documentation · SpineOpt.jl"/><meta property="twitter:title" content="Documentation · SpineOpt.jl"/><meta name="description" content="Documentation for SpineOpt.jl."/><meta property="og:description" content="Documentation for SpineOpt.jl."/><meta property="twitter:description" content="Documentation for SpineOpt.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/style.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="SpineOpt.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">SpineOpt.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../getting_started/installation/">Installation</a></li><li><a class="tocitem" href="../../getting_started/recommended_workflow/">Recommended workflow</a></li><li><a class="tocitem" href="../../getting_started/troubleshooting/">Troubleshooting</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorial/webinars/">Webinars and examples</a></li><li><a class="tocitem" href="../../tutorial/simple_system/">Simple system</a></li><li><a class="tocitem" href="../../tutorial/temporal_resolution/">Temporal resolution</a></li><li><a class="tocitem" href="../../tutorial/stochastic_system/">Stochastic structure</a></li><li><a class="tocitem" href="../../tutorial/capacity_planning/">Capacity planning</a></li><li><a class="tocitem" href="../../tutorial/multi-year_investment/">Multi-year investments using economic parameters</a></li><li><a class="tocitem" href="../../tutorial/reserves/">Reserve requirements</a></li><li><a class="tocitem" href="../../tutorial/ramping/">Ramping constraints</a></li><li><a class="tocitem" href="../../tutorial/unit_commitment/">Unit Commitment</a></li></ul></li><li><span class="tocitem">How to</span><ul><li><a class="tocitem" href="../../how_to/change_the_solver/">Change the solver</a></li><li><a class="tocitem" href="../../how_to/compile_julia_system_image/">Compile julia system image</a></li><li><a class="tocitem" href="../../how_to/define_an_efficiency/">Define an efficiency</a></li><li><a class="tocitem" href="../../how_to/impose_renewable_energy_targets/">Impose renewable energy targets</a></li><li><a class="tocitem" href="../../how_to/manage_output/">Manage output</a></li><li><a class="tocitem" href="../../how_to/model_hydro_power_coupling/">Model hydro power coupling</a></li><li><a class="tocitem" href="../../how_to/print_the_model/">Print the model</a></li><li><a class="tocitem" href="../../how_to/set_up_representative_days_for_investment_problems/">Set up representative days for investment problems</a></li></ul></li><li><span class="tocitem">Database structure</span><ul><li><a class="tocitem" href="../../concept_reference/the_basics/">Basics of the data structure</a></li><li><a class="tocitem" href="../../concept_reference/archetypes/">Archetypes</a></li></ul></li><li><span class="tocitem">Standard model framework</span><ul><li><a class="tocitem" href="../../advanced_concepts/temporal_framework/">Temporal Framework</a></li><li><a class="tocitem" href="../../advanced_concepts/stochastic_framework/">Stochastic Framework</a></li></ul></li><li><span class="tocitem">Standard model features</span><ul><li><a class="tocitem" href="../../advanced_concepts/unit_commitment/">Unit Commitment</a></li><li><a class="tocitem" href="../../advanced_concepts/investment_optimization/">Investment Optimization</a></li><li><a class="tocitem" href="../../advanced_concepts/multi-year/">Multi-year Investments</a></li><li><a class="tocitem" href="../../advanced_concepts/reserves/">Reserves</a></li><li><a class="tocitem" href="../../advanced_concepts/ramping/">Ramping</a></li><li><a class="tocitem" href="../../advanced_concepts/Lossless_DC_power_flow/">Lossless nodal DC power flows</a></li><li><a class="tocitem" href="../../advanced_concepts/powerflow/">PTDF-Based Powerflow</a></li><li><a class="tocitem" href="../../advanced_concepts/pressure_driven_gas_transfer/">Pressure driven gas transfer</a></li><li><a class="tocitem" href="../../advanced_concepts/user_constraints/">User Constraints</a></li></ul></li><li><span class="tocitem">Algorithms</span><ul><li><a class="tocitem" href="../../advanced_concepts/decomposition/">Decomposition</a></li><li><a class="tocitem" href="../../advanced_concepts/mga/">Modelling to generate alternatives</a></li><li><a class="tocitem" href="../../advanced_concepts/multi_stage/">Multi-stage optimisation</a></li></ul></li><li><span class="tocitem">SpineOpt Template</span><ul><li><a class="tocitem" href="../../concept_reference/Object Classes/">Object Classes</a></li><li><a class="tocitem" href="../../concept_reference/Relationship Classes/">Relationship Classes</a></li><li><a class="tocitem" href="../../concept_reference/Parameters/">Parameters</a></li><li><a class="tocitem" href="../../concept_reference/Parameter Value Lists/">Parameter Value Lists</a></li></ul></li><li><span class="tocitem">Mathematical Formulation</span><ul><li><a class="tocitem" href="../../mathematical_formulation/variables/">Variables</a></li><li><a class="tocitem" href="../../mathematical_formulation/objective_function/">Objective</a></li><li><a class="tocitem" href="../../mathematical_formulation/constraints_automatically_generated/">Constraints</a></li></ul></li><li><span class="tocitem">Implementation details</span><ul><li class="is-active"><a class="tocitem" href>Documentation</a><ul class="internal"><li><a class="tocitem" href="#Build-the-documentation-locally"><span>Build the documentation locally</span></a></li><li><a class="tocitem" href="#Concept-reference"><span>Concept reference</span></a></li><li><a class="tocitem" href="#Documentation-from-docstring"><span>Documentation from docstring</span></a></li><li><a class="tocitem" href="#Drag-and-drop"><span>Drag and drop</span></a></li></ul></li><li><a class="tocitem" href="../how_does_the_model_update_itself/">How does the model update itself</a></li><li><a class="tocitem" href="../how_to_write_a_constraint/">How to write a constraint</a></li><li><a class="tocitem" href="../time_slices/">Time slices</a></li></ul></li><li><a class="tocitem" href="../../library/">Library</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Implementation details</a></li><li class="is-active"><a href>Documentation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Documentation</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/spine-tools/SpineOpt.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/spine-tools/SpineOpt.jl/blob/master/docs/src/implementation_details/documentation.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Documentation"><a class="docs-heading-anchor" href="#Documentation">Documentation</a><a id="Documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Documentation" title="Permalink"></a></h1><p>The documentation is build with <a href="https://documenter.juliadocs.org/stable/">Documenter.jl</a>, by running the <code>make.jl</code> script. Note that <code>make.jl</code> calls some stuff from <code>docs_util.jl</code>.</p><h2 id="Build-the-documentation-locally"><a class="docs-heading-anchor" href="#Build-the-documentation-locally">Build the documentation locally</a><a id="Build-the-documentation-locally-1"></a><a class="docs-heading-anchor-permalink" href="#Build-the-documentation-locally" title="Permalink"></a></h2><p>The documentation is bundled in with the source code, so it is possible to build the documentation locally.</p><p>First, <strong>navigate into the SpineOpt main folder</strong> and activate the <code>docs</code> environment from the julia package manager:</p><pre><code class="language-julia hljs">(SpineOpt) pkg&gt; activate docs
(docs) pkg&gt;</code></pre><p>Next, in order to make sure that the <code>docs</code> environment uses the same SpineOpt version it is contained within, install the package locally into the <code>docs</code> environment:</p><pre><code class="language-julia hljs">(docs) pkg&gt; develop .
Resolving package versions...
&lt;lots of packages being checked&gt;
(docs) pkg&gt;</code></pre><p>Now, you should be able to build the documentation by exiting the package manager and typing:</p><pre><code class="language-julia hljs">julia&gt; include(&quot;docs/make.jl&quot;)</code></pre><p>This should build the documentation on your computer, and you can access it in the <code>docs/build/</code> folder.</p><h2 id="Concept-reference"><a class="docs-heading-anchor" href="#Concept-reference">Concept reference</a><a id="Concept-reference-1"></a><a class="docs-heading-anchor-permalink" href="#Concept-reference" title="Permalink"></a></h2><p>Parameters.md is one of the files that is automatically generated. Each parameter has a description in the concept_reference folder and is further processed with the spineopt template. As such there is no point in attempting to make changes directly in Parameters.md.</p><h2 id="Documentation-from-docstring"><a class="docs-heading-anchor" href="#Documentation-from-docstring">Documentation from docstring</a><a id="Documentation-from-docstring-1"></a><a class="docs-heading-anchor-permalink" href="#Documentation-from-docstring" title="Permalink"></a></h2><p>The mathematical formulation of the constraints is also automatically generated: constraints.md contains tags to automatically pull a function&#39;s docstring to the file constraints_automatically_generated.md. An example of a tag:</p><pre><code class="nohighlight hljs">@@add_constraint_nodal_balance!</code></pre><p>An example for how the docstring looks:</p><pre><code class="nohighlight hljs">@doc raw&quot;&quot;&quot;
    add_constraint_nodal_balance!(m::Model)

Balance equation for nodes.

In **SpineOpt**, [node](@ref) is the place where an energy balance is enforced. As universal aggregators,
they are the glue that brings all components of the energy system together. An energy balance is created for each [node](@ref) for all `node_stochastic_time_indices`, unless the [balance\_type](@ref) parameter of the node takes the value [balance\_type\_none](@ref balance_type_list) or if the node in question is a member of a node group, for which the [balance\_type](@ref) is [balance\_type\_group](@ref balance_type_list). The parameter [nodal\_balance\_sense](@ref) defaults to equality, but can be changed to allow overproduction ([nodal\_balance\_sense](@ref) [`&gt;=`](@ref constraint_sense_list)) or underproduction ([nodal\_balance\_sense](@ref) [`&lt;=`](@ref constraint_sense_list)).
The energy balance is enforced by the following constraint:
</code></pre><p>math \begin{aligned} &amp; v<em>{node\</em>injection}(n,s,t) \
&amp; + \sum<em>{\substack{(conn,n&#39;,d</em>{in},s,t) \in connection_flow_indices: \ d<em>{out} == :to\</em>node}} v<em>{connection\</em>flow}(conn,n&#39;,d<em>{in},s,t)\
&amp; - \sum</em>{\substack{(conn,n&#39;,d<em>{out},s,t) \in connection\</em>flow_indices: \ d<em>{out} == :from\</em>node}} v<em>{connection\</em>flow}(conn,n&#39;,d<em>{out},s,t)\
&amp; + v</em>{node_slack_pos}(n,s,t) \
&amp; - v<em>{node\</em>slack_neg}(n,s,t) \
&amp; {&gt;=,==,&lt;=} \
&amp; 0 \
&amp; \forall (n,s,t) \in node_stochastic_time_indices: \
&amp; p<em>{balance\</em>type}(n) != balance_type_none \
&amp; \nexists ng \in groups(n) : balance_type_group \
\end{aligned}</p><pre><code class="nohighlight hljs">&quot;&quot;&quot;</code></pre><p>The reason for using the docstring is such that it is easier to update the documentation in the docstring when developing a certain constraint.</p><p>The feature is completely optional. To activate the functionality for another file (e.g. objective.md) add tags to that file and then add code similar to this to make.jl.</p><pre><code class="language-julia hljs">mathpath = joinpath(path, &quot;src&quot;, &quot;mathematical_formulation&quot;)
docstrings = all_docstrings(SpineOpt)

objective_function_lines = readlines(joinpath(mathpath, &quot;objective_function.md&quot;))
expand_tags!(objective_function_lines, docstrings)
open(joinpath(mathpath, &quot;objective_function_automatically_generated.md&quot;), &quot;w&quot;) do file
    write(file, join(objective_function_lines, &quot;\n&quot;))
end</code></pre><p>To deactivate the functionality, just remove the code and replace the tags in your .md file.</p><p>It is also possible to introduce this feature over time. Anytime you want to add the documentation of a constraint to the docstring you need to follow a few steps:</p><ol><li>For the docstring<ol><li>add <code>@doc raw</code> before the docstring (that allows to write latex in the docstring)</li></ol></li><li>For the .md file<ol><li>cut the description and mathematical formulation and paste them in the corresponding function&#39;s docstring</li><li>add the tag to pull the above from the docstring</li></ol></li></ol><p>An example of both the docstring and the instruction file have already been shown above.</p><h2 id="Drag-and-drop"><a class="docs-heading-anchor" href="#Drag-and-drop">Drag and drop</a><a id="Drag-and-drop-1"></a><a class="docs-heading-anchor-permalink" href="#Drag-and-drop" title="Permalink"></a></h2><p>There is also a drag-and-drop feature for select chapters (e.g. the how to section). For those chapters you can simply add your markdown file to the folder of the chapter and it will be automatically added to the documentation. To allow both manually composed chapters and automatically generated chapter, the functionality is only activated for empty chapters (of the structure &quot;chapter name&quot; =&gt; []).</p><p>The drag-and-drop function assumes a specific structure for the documentation files.</p><ul><li>All chapters and corresponding markdownfiles are in the docs/src folder.</li><li>Folder names need to be lowercase with underscores because the automated folder names are derived from the page names in make.jl. A new chapter (e.g. implementation details) needs to follow this structure.</li><li>Markdown file names can have uppercases and can have underscores but don&#39;t need to because the page names in make.jl are derived from the actual file names. In other words, your filename will become the page name in the documentation so make this descriptive.</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../mathematical_formulation/constraints_automatically_generated/">« Constraints</a><a class="docs-footer-nextpage" href="../how_does_the_model_update_itself/">How does the model update itself »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Monday 4 November 2024 09:28">Monday 4 November 2024</span>. Using Julia version 1.11.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
