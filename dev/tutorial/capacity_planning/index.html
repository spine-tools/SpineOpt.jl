<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Capacity planning · SpineOpt.jl</title><meta name="title" content="Capacity planning · SpineOpt.jl"/><meta property="og:title" content="Capacity planning · SpineOpt.jl"/><meta property="twitter:title" content="Capacity planning · SpineOpt.jl"/><meta name="description" content="Documentation for SpineOpt.jl."/><meta property="og:description" content="Documentation for SpineOpt.jl."/><meta property="twitter:description" content="Documentation for SpineOpt.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/style.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="SpineOpt.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">SpineOpt.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../getting_started/installation/">Installation</a></li><li><a class="tocitem" href="../../getting_started/recommended_workflow/">Recommended workflow</a></li><li><a class="tocitem" href="../../getting_started/troubleshooting/">Troubleshooting</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../webinars/">Webinars and examples</a></li><li><a class="tocitem" href="../simple_system/">Simple system</a></li><li><a class="tocitem" href="../temporal_resolution/">Temporal resolution</a></li><li><a class="tocitem" href="../stochastic_system/">Stochastic structure</a></li><li class="is-active"><a class="tocitem" href>Capacity planning</a><ul class="internal"><li><a class="tocitem" href="#Overview"><span>Overview</span></a></li><li><a class="tocitem" href="#Spine-Toolbox"><span>Spine Toolbox</span></a></li><li><a class="tocitem" href="#Temporal-structure"><span>Temporal structure</span></a></li><li><a class="tocitem" href="#Unit-investment-parameters"><span>Unit investment parameters</span></a></li><li><a class="tocitem" href="#Examine-output"><span>Examine output</span></a></li><li><a class="tocitem" href="#Multi-year-investments"><span>Multi-year investments</span></a></li><li><a class="tocitem" href="#Debugging"><span>Debugging</span></a></li></ul></li><li><a class="tocitem" href="../reserves/">Reserve requirements</a></li><li><a class="tocitem" href="../ramping/">Ramping constraints</a></li><li><a class="tocitem" href="../unit_commitment/">Unit Commitment</a></li></ul></li><li><span class="tocitem">How to</span><ul><li><a class="tocitem" href="../../how_to/change_the_solver/">Change the solver</a></li><li><a class="tocitem" href="../../how_to/compile_julia_system_image/">Compile julia system image</a></li><li><a class="tocitem" href="../../how_to/define_an_efficiency/">Define an efficiency</a></li><li><a class="tocitem" href="../../how_to/manage_output/">Manage output</a></li><li><a class="tocitem" href="../../how_to/model_hydro_power_coupling/">Model hydro power coupling</a></li><li><a class="tocitem" href="../../how_to/print_the_model/">Print the model</a></li></ul></li><li><span class="tocitem">Concept Reference</span><ul><li><a class="tocitem" href="../../concept_reference/the_basics/">Basics of the model structure</a></li><li><a class="tocitem" href="../../concept_reference/Object Classes/">Object Classes</a></li><li><a class="tocitem" href="../../concept_reference/Relationship Classes/">Relationship Classes</a></li><li><a class="tocitem" href="../../concept_reference/Parameters/">Parameters</a></li><li><a class="tocitem" href="../../concept_reference/Parameter Value Lists/">Parameter Value Lists</a></li><li><a class="tocitem" href="../../concept_reference/archetypes/">Archetypes</a></li></ul></li><li><span class="tocitem">Mathematical Formulation</span><ul><li><a class="tocitem" href="../../mathematical_formulation/variables/">Variables</a></li><li><a class="tocitem" href="../../mathematical_formulation/constraints_automatically_generated/">Constraints</a></li><li><a class="tocitem" href="../../mathematical_formulation/objective_function/">Objective</a></li></ul></li><li><span class="tocitem">Advanced Concepts</span><ul><li><a class="tocitem" href="../../advanced_concepts/temporal_framework/">Temporal Framework</a></li><li><a class="tocitem" href="../../advanced_concepts/stochastic_framework/">Stochastic Framework</a></li><li><a class="tocitem" href="../../advanced_concepts/unit_commitment/">Unit Commitment</a></li><li><a class="tocitem" href="../../advanced_concepts/ramping/">Ramping</a></li><li><a class="tocitem" href="../../advanced_concepts/reserves/">Reserves</a></li><li><a class="tocitem" href="../../advanced_concepts/investment_optimization/">Investment Optimization</a></li><li><a class="tocitem" href="../../advanced_concepts/user_constraints/">User Constraints</a></li><li><a class="tocitem" href="../../advanced_concepts/decomposition/">Decomposition</a></li><li><a class="tocitem" href="../../advanced_concepts/powerflow/">PTDF-Based Powerflow</a></li><li><a class="tocitem" href="../../advanced_concepts/pressure_driven_gas_transfer/">Pressure driven gas transfer</a></li><li><a class="tocitem" href="../../advanced_concepts/Lossless_DC_power_flow/">Lossless nodal DC power flows</a></li><li><a class="tocitem" href="../../advanced_concepts/representative_days_w_seasonal_storage/">Representative days with seasonal storages</a></li><li><a class="tocitem" href="../../advanced_concepts/cumulated_flow_restrictions/">Imposing renewable energy targets</a></li><li><a class="tocitem" href="../../advanced_concepts/mga/">Modelling to generate alternatives</a></li><li><a class="tocitem" href="../../advanced_concepts/multi_stage/">Multi-stage optimisation</a></li></ul></li><li><span class="tocitem">Implementation details</span><ul><li><a class="tocitem" href="../../implementation_details/documentation/">Documentation</a></li><li><a class="tocitem" href="../../implementation_details/how_does_the_model_update_itself/">How does the model update itself</a></li><li><a class="tocitem" href="../../implementation_details/how_to_write_a_constraint/">How to write a constraint</a></li><li><a class="tocitem" href="../../implementation_details/time_slices/">Time slices</a></li></ul></li><li><a class="tocitem" href="../../library/">Library</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>Capacity planning</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Capacity planning</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/spine-tools/SpineOpt.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/spine-tools/SpineOpt.jl/blob/master/docs/src/tutorial/capacity_planning.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Capacity-Planning-Tutorial"><a class="docs-heading-anchor" href="#Capacity-Planning-Tutorial">Capacity Planning Tutorial</a><a id="Capacity-Planning-Tutorial-1"></a><a class="docs-heading-anchor-permalink" href="#Capacity-Planning-Tutorial" title="Permalink"></a></h1><p>This tutorial provides a step-by-step guide to include investment constraints for capacity planning in a simple energy system with Spine Toolbox for SpineOpt. There is more information to be found in the documentation on <a href="https://spine-tools.github.io/SpineOpt.jl/latest/advanced_concepts/investment_optimization/">investment optimization</a>. To get the most out of this tutorial, we suggest first completing the <a href="https://spine-tools.github.io/SpineOpt.jl/latest/tutorial/simple_system/">Simple System tutorial</a>.</p><h2 id="Overview"><a class="docs-heading-anchor" href="#Overview">Overview</a><a id="Overview-1"></a><a class="docs-heading-anchor-permalink" href="#Overview" title="Permalink"></a></h2><p>In this tutorial we will:</p><ul><li>start from the simple system tutorial,</li><li>change the temporal structure from days to months,</li><li>add a temporal block for investments,</li><li>and add investment related parameters for the units.</li></ul><p>We end the tutorial with a guide on multi-year investments.</p><h2 id="Spine-Toolbox"><a class="docs-heading-anchor" href="#Spine-Toolbox">Spine Toolbox</a><a id="Spine-Toolbox-1"></a><a class="docs-heading-anchor-permalink" href="#Spine-Toolbox" title="Permalink"></a></h2><p>Create a new workflow in Spine Toolbox, as you did for the simple system tutorial. In the input database, we import the simple system tutorial (File &gt; import).</p><h2 id="Temporal-structure"><a class="docs-heading-anchor" href="#Temporal-structure">Temporal structure</a><a id="Temporal-structure-1"></a><a class="docs-heading-anchor-permalink" href="#Temporal-structure" title="Permalink"></a></h2><p>For the investment optimization, let us consider a more appropriate time horizon, e.g. 2030-2035. We set the <code>model_start</code> and <code>model_end</code> parameters accordingly to 2030-01-01 and 2036-01-01.</p><p>We&#39;ll consider a seasonal operation (to reduce the number of entries later on) so we&#39;ll set the resolution of the exiting temporal block to <code>4M</code>. For clarity we also change the name from <code>flat</code> to <code>operation</code>.</p><p>For the investment period we&#39;ll have to add another temporal block called <code>investment</code>. We connect it to the model entity with the <code>model__temporal_block</code> and <code>model__default_investment_temporal_block</code>. The resolution is to be set to <code>5Y</code>.</p><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>Instead of a default connection to the model entity, we can also make the investment temporal block specific to a part of the energy system, e.g. with the <a href="../../concept_reference/Relationship Classes/#unit__investment_temporal_block">unit__investment_temporal_block</a> entity.</p></div></div><p>In principle we also need to define the default investment stochastic structure. To that end, we can simply connect the existing stochastic structure to the model entity using the <code>model__default_investment_stochastic_structure</code> entity.</p><p><img src="../figs_capacity_planning/capacity_temporal.png" alt="image"/></p><h2 id="Unit-investment-parameters"><a class="docs-heading-anchor" href="#Unit-investment-parameters">Unit investment parameters</a><a id="Unit-investment-parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Unit-investment-parameters" title="Permalink"></a></h2><p>With the infrastructure for investments in place, we can now ready units for the investment optimization. For both power plants:</p><ul><li>Set the <a href="../../concept_reference/Parameters/#number_of_units">number_of_units</a> parameter to zero so that the unit is unavailable unless invested in.</li><li>Set the <a href="../../concept_reference/Parameters/#initial_units_invested_available">initial_units_invested_available</a> to zero as well for a similar reason.</li><li>Set the <a href="../../concept_reference/Parameters/#candidate_units">candidate_units</a> parameter for the unit to 1 to specify that a maximum of 1 new unit of this type may be invested in by the model.</li><li>Set the unit&#39;s investment cost by setting the <a href="../../concept_reference/Parameters/#unit_investment_cost">unit_investment_cost</a> parameter to 1000.0. It is important to mention that, normally, you should use the discounted cost. In this example, the costs in 2030 and in 2035 should be discounted to the discount year, i.e., you would define a time-varying cost to reflect the economic representation.</li><li>Specify the <a href="../../concept_reference/Parameters/#unit_investment_tech_lifetime">unit_investment_tech_lifetime</a> of the unit to, say, 10 years (duration <code>10Y</code>) to specify that this is the minimum amount of time this new unit must be in existence after being invested in.</li><li>Specify the <a href="../../concept_reference/Parameters/#unit_investment_econ_lifetime">unit_investment_econ_lifetime</a> to automatically adjust the investment costs. Let&#39;s set it equal to the technical lifetime here.</li><li>Specify the <a href="../../concept_reference/Parameters/#unit_investment_variable_type">unit_investment_variable_type</a> to <code>unit_investment_variable_type_integer</code> to specify that this is a discrete <a href="../../concept_reference/Object Classes/#unit">unit</a> investment decision. By default this is set to continuous and we would see an investment of 0.25 units for power plant b in the solution. That also shows that unit size is set by the <code>unit_capacity</code> parameter of the <code>unit__to_node</code> entity (for power plant b the unit capacity is 200 and multiplied with the investment of 0.25 units we obtain 50 which equals the flow from power plant b).</li><li>Specify the <a href="../../concept_reference/Parameters/#units_on_cost">units_on_cost</a> to apply a cost to units that are on. Sometimes this is necessary to ensure that the <a href="../../mathematical_formulation/variables/#units_on">units_on</a> variables are created which are needed for the proper functioning of the constraints. Even a value of 0.0 is sufficient to trigger these variables. And that is also what we do here.</li></ul><p><img src="../figs_capacity_planning/capacity_unit.png" alt="image"/></p><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>Investments in storage and connections are very similar. Note that storage is implemented through nodes.</p></div></div><h2 id="Examine-output"><a class="docs-heading-anchor" href="#Examine-output">Examine output</a><a id="Examine-output-1"></a><a class="docs-heading-anchor-permalink" href="#Examine-output" title="Permalink"></a></h2><p>To be able to see the investments in the results, we&#39;ll have to add some more output entities to the report entity, i.e. <code>units_invested</code> and <code>units_on</code>. Commit the changes to the input data base and run the SpineOpt tool. In the output you should now also find the investments. The value should be equal to 1.0 unit.</p><h2 id="Multi-year-investments"><a class="docs-heading-anchor" href="#Multi-year-investments">Multi-year investments</a><a id="Multi-year-investments-1"></a><a class="docs-heading-anchor-permalink" href="#Multi-year-investments" title="Permalink"></a></h2><p>Multi-year investments refer to making investment decisions at different points in time, such that a pathway of investments can be modeled. This is particularly useful when long-term scenarios are modeled, but modeling each year is not practical. Or in a business case, investment decisions are supposed to be made in different years which has an impact on the cash flow.</p><p>In this tutorial, we consider two investment points, at the start of the modeling horizon (2030), and 5 years later (2035). Operation is assumed to be every 4 months, but only in 2030 and 2035. In other words, we only model 2030 and 2035 as milestone years for the pathway 2030 - 2035.</p><p>To make this work, some adjustments are needed to:</p><ul><li>the temporal structure,</li><li>the demand,</li><li>and the units.</li></ul><p>For the temporal structure, we need a separate operation temporal block for 2030 and 2035 (each with a resolution of <code>4M</code>). To obtain a discontinuous gap between the years in the model we set the <code>block_start</code> and <code>block_end</code> to the start and end of the respective years. Note that for the temporal block of 2035 we already start in the last season of the previous year. That is to be able to set the boundary conditions for that block.</p><p><img src="../figs_capacity_planning/multi-year_temporal.png" alt="image"/></p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>It is important to delete the temporal blocks that are not used, and only leave the used ones. Otherwise, the temporal structure may be wrong.</p></div></div><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>Discontinuous (or non-consecutive) time slices in SpineOpt need to be initialized in order for SpineOpt to correctly generate constraints. For the first time slice that is done through the initialization parameters as has been done before in the tutorials. For the other time slices, an additional preceding time slice is needed. The boundary conditions for, e.g., initial storage level or online status of units can be set in that preceding time slice.</p><p>Note that we do not yet support linking the boundary conditions with the previous operation temporal block. This additional definition means that we will also have results for it, which is redundant and should be ignored when post-processing.</p></div></div><p>The demand data is seasonal (4M). We assume that the demand increases over the years. So, let&#39;s take a demand of 100 for all seasons in 2030 and a demand of 400 for all seasons in 2035. In the input database that means that we&#39;ll have to change the constant value of the demand to a time series with variable resolution. We can then enter the values for each season. For the initial conditions of the second time slice, we&#39;ll add a 0 at 2034-09-01.</p><p><img src="../figs_capacity_planning/multi-year_demand.png" alt="image"/></p><p>We will allow investments for <code>power_plant_a</code> in both 2030 and 2035, and for <code>power_plant_b</code> only in 2035. This is realised through the definition of <a href="../../concept_reference/Parameters/#candidate_units">candidate_units</a> as a time series with variable resolution.</p><ul><li>power<em>plant</em>a: [2030-01-01: 1, 2035-01-01: 2]. Note this means in 2030, 1 unit can be invested, and in 2035, another 1 <strong>(instead of 2)</strong> can invested. In other words, this parameter includes the previously available units.</li><li>power<em>plant</em>b: [2030-01-01: 0, 2035-01-01: 1].</li></ul><p><img src="../figs_capacity_planning/multi-year_unit_a.png" alt="image"/> <img src="../figs_capacity_planning/multi-year_unit_b.png" alt="image"/></p><p>We can check the results for <code>power_plant_a</code> first. The below pictures show that in 2030, there is 1 investment, and in 2035, there is another investment. In 2035, there are 2 units on.</p><p>Note we notice a drop between the two periods for operation variables, <code>units_on</code> in this case, because it is a redundant result.</p><p><img src="../figs_capacity_planning/result-ppa-invested.png" alt="image"/> <img src="../figs_capacity_planning/result-ppa-on.png" alt="image"/></p><p>We also get 1 investment for <code>power_plant_b</code> in 2035.</p><p><img src="../figs_capacity_planning/result-ppb-invested.png" alt="image"/> <img src="../figs_capacity_planning/result-ppb-on.png" alt="image"/></p><h2 id="Debugging"><a class="docs-heading-anchor" href="#Debugging">Debugging</a><a id="Debugging-1"></a><a class="docs-heading-anchor-permalink" href="#Debugging" title="Permalink"></a></h2><p>For debugging purposes, consider an overview of all the parameters in this tutorial below.</p><p><img src="../figs_capacity_planning/overview.png" alt="image"/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../stochastic_system/">« Stochastic structure</a><a class="docs-footer-nextpage" href="../reserves/">Reserve requirements »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.6.0 on <span class="colophon-date" title="Monday 26 August 2024 09:54">Monday 26 August 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
