<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Retrofitting · SpineOpt.jl</title><meta name="title" content="Retrofitting · SpineOpt.jl"/><meta property="og:title" content="Retrofitting · SpineOpt.jl"/><meta property="twitter:title" content="Retrofitting · SpineOpt.jl"/><meta name="description" content="Documentation for SpineOpt.jl."/><meta property="og:description" content="Documentation for SpineOpt.jl."/><meta property="twitter:description" content="Documentation for SpineOpt.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/style.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="SpineOpt.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">SpineOpt.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../getting_started/installation/">Installation</a></li><li><a class="tocitem" href="../../getting_started/recommended_workflow/">Verify installation</a></li><li><a class="tocitem" href="../../getting_started/troubleshooting/">Troubleshooting</a></li><li><a class="tocitem" href="../../getting_started/performance_tips/">Performace tips</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorial/webinars/">Webinars</a></li><li><a class="tocitem" href="../../tutorial/simple_system/">Simple system</a></li><li><a class="tocitem" href="../../tutorial/temporal_resolution/">Temporal resolution</a></li><li><a class="tocitem" href="../../tutorial/stochastic_system/">Stochastic structure</a></li><li><a class="tocitem" href="../../tutorial/capacity_planning/">Capacity planning</a></li><li><a class="tocitem" href="../../tutorial/multi-year_investment/">Multi-year investments using economic parameters</a></li><li><a class="tocitem" href="../../tutorial/reserves/">Reserve requirements</a></li><li><a class="tocitem" href="../../tutorial/ramping/">Ramping constraints</a></li><li><a class="tocitem" href="../../tutorial/unit_commitment/">Unit Commitment</a></li></ul></li><li><span class="tocitem">How to</span><ul><li><a class="tocitem" href="../change_the_solver/">Change the solver</a></li><li><a class="tocitem" href="../compile_julia_system_image/">Compile julia system image</a></li><li><a class="tocitem" href="../define_an_efficiency/">Define an efficiency</a></li><li><a class="tocitem" href="../impose_renewable_energy_targets/">Impose renewable energy targets</a></li><li><a class="tocitem" href="../manage_output/">Manage output</a></li><li><a class="tocitem" href="../model_hydro_power_coupling/">Model hydro power coupling</a></li><li><a class="tocitem" href="../print_the_model/">Print the model</a></li><li class="is-active"><a class="tocitem" href>Retrofitting</a><ul class="internal"><li><a class="tocitem" href="#Model-Setup"><span>Model Setup</span></a></li><li><a class="tocitem" href="#Model-Results"><span>Model Results</span></a></li></ul></li><li><a class="tocitem" href="../set_up_representative_days_for_investment_problems/">Set up representative days for investment problems</a></li></ul></li><li><a class="tocitem" href="../../gallery/gallery/">Example gallery</a></li><li><span class="tocitem">Database structure</span><ul><li><a class="tocitem" href="../../concept_reference/the_basics/">Basics of the data structure</a></li><li><a class="tocitem" href="../../concept_reference/archetypes/">Archetypes</a></li></ul></li><li><span class="tocitem">Standard model framework</span><ul><li><a class="tocitem" href="../../advanced_concepts/temporal_framework/">Temporal Framework</a></li><li><a class="tocitem" href="../../advanced_concepts/stochastic_framework/">Stochastic Framework</a></li></ul></li><li><span class="tocitem">Standard model features</span><ul><li><a class="tocitem" href="../../advanced_concepts/unit_commitment/">Unit Commitment</a></li><li><a class="tocitem" href="../../advanced_concepts/investment_optimization/">Investment Optimization</a></li><li><a class="tocitem" href="../../advanced_concepts/multi-year/">Multi-year Investments</a></li><li><a class="tocitem" href="../../advanced_concepts/reserves/">Reserves</a></li><li><a class="tocitem" href="../../advanced_concepts/ramping/">Ramping</a></li><li><a class="tocitem" href="../../advanced_concepts/Lossless_DC_power_flow/">Lossless nodal DC power flows</a></li><li><a class="tocitem" href="../../advanced_concepts/powerflow/">PTDF-Based Powerflow</a></li><li><a class="tocitem" href="../../advanced_concepts/pressure_driven_gas_transfer/">Pressure driven gas transfer</a></li><li><a class="tocitem" href="../../advanced_concepts/user_constraints/">User Constraints</a></li></ul></li><li><span class="tocitem">Algorithms</span><ul><li><a class="tocitem" href="../../advanced_concepts/decomposition/">Decomposition</a></li><li><a class="tocitem" href="../../advanced_concepts/mga/">Modelling to generate alternatives</a></li><li><a class="tocitem" href="../../advanced_concepts/multi_stage/">Multi-stage optimisation</a></li></ul></li><li><span class="tocitem">SpineOpt Template</span><ul><li><a class="tocitem" href="../../concept_reference/Object Classes/">Object Classes</a></li><li><a class="tocitem" href="../../concept_reference/Relationship Classes/">Relationship Classes</a></li><li><a class="tocitem" href="../../concept_reference/Parameters/">Parameters</a></li><li><a class="tocitem" href="../../concept_reference/Parameter Value Lists/">Parameter Value Lists</a></li></ul></li><li><span class="tocitem">Mathematical Formulation</span><ul><li><a class="tocitem" href="../../mathematical_formulation/variables/">Variables</a></li><li><a class="tocitem" href="../../mathematical_formulation/objective_function/">Objective</a></li><li><a class="tocitem" href="../../mathematical_formulation/constraints_automatically_generated/">Constraints</a></li></ul></li><li><span class="tocitem">Implementation details</span><ul><li><a class="tocitem" href="../../implementation_details/documentation/">Documentation</a></li><li><a class="tocitem" href="../../implementation_details/how_does_the_model_update_itself/">How does the model update itself</a></li><li><a class="tocitem" href="../../implementation_details/how_to_write_a_constraint/">How to write a constraint</a></li><li><a class="tocitem" href="../../implementation_details/time_slices/">Time slices</a></li></ul></li><li><a class="tocitem" href="../../library/">Library</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">How to</a></li><li class="is-active"><a href>Retrofitting</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Retrofitting</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/spine-tools/SpineOpt.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/spine-tools/SpineOpt.jl/blob/master/docs/src/how_to/retrofitting.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="How-to-Model-Retrofitting"><a class="docs-heading-anchor" href="#How-to-Model-Retrofitting">How to Model Retrofitting</a><a id="How-to-Model-Retrofitting-1"></a><a class="docs-heading-anchor-permalink" href="#How-to-Model-Retrofitting" title="Permalink"></a></h1><p>This how-to introduces how we can model retrofitting in SpineOpt. The meaning of retrofitting may vary depending on the context and so does the modelling approach. Here we focus on the very fundamental case where one wants to retrofit an existing <code>unit</code> for the continuation of current supply generation. The introduced approach can also model retrofitting an existing <code>unit</code> for producing for a different demand. Same retrofitting processes for <code>connection</code> and <code>node</code> storage can be modelled likewise.</p><h2 id="Model-Setup"><a class="docs-heading-anchor" href="#Model-Setup">Model Setup</a><a id="Model-Setup-1"></a><a class="docs-heading-anchor-permalink" href="#Model-Setup" title="Permalink"></a></h2><p>This section briefs the model instance setup with illustrating the key system specification. The file <a href="../retrofit_material/retrofitting_example_1.json">retrofitting<em>example</em>1.json</a> provides a complete database of this example model instance.</p><h3 id="Basic-System-Instance-Setup"><a class="docs-heading-anchor" href="#Basic-System-Instance-Setup">Basic System Instance Setup</a><a id="Basic-System-Instance-Setup-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-System-Instance-Setup" title="Permalink"></a></h3><p>The base system consists of </p><ul><li>a <code>node</code> &quot;demand_A&quot; with a fixed energy <code>demand</code> of 100 over the entire modelling horizon</li><li>an existing <code>unit</code> &quot;generator<em>A&quot; to supply &quot;demand</em>A&quot; with <code>unit_capacity</code>=&quot;100&quot; and <code>vom_cost</code>=&quot;2&quot;. This unit, however, will retire as of hour 5, specified by the &#39;Time series&#39; value of parameter <code>fix_units_invested_available</code>.</li><li>an investable <code>unit</code> &quot;generator<em>A</em>new&quot; of the same techno-economic characteristics as &quot;generator<em>A&quot;, with `unit</em>investment<em>cost<code>=&quot;1000&quot; and a 15 year</code>unit</em>investment<em>tech</em>lifetime`. This unit represents the as-usual replacement of &quot;generator_A&quot; when it gets retired.</li></ul><p><img src="../retrofit_material/example_1_system_basic.png" alt="Basic system setup."/></p><h3 id="Retrofitting-Setup"><a class="docs-heading-anchor" href="#Retrofitting-Setup">Retrofitting Setup</a><a id="Retrofitting-Setup-1"></a><a class="docs-heading-anchor-permalink" href="#Retrofitting-Setup" title="Permalink"></a></h3><p>For retrofitting, we introduce a new <code>unit</code> &quot;generator<em>A</em>retro&quot; as an alternative investment option of &quot;generator<em>A</em>new&quot;, with the same <code>vom_cost</code> and <code>unit_investment_tech_lifetime</code>, and different <code>unit_capacity</code>=&quot;80&quot; and <code>unit_investment_cost</code>=&quot;400&quot;. In this configuration, we would model the case where 80% of &quot;generator_A&quot;&#39;s capacity can be retrofitted in a cheaper investment cost than building a new one.</p><p>Particularly, the last and key steps to make &quot;generator<em>A</em>retro&quot; a retrofitting option for &quot;generator_A&quot; include:</p><ol><li>create an <code>investment_group</code> entity &quot;retrofitting&quot;, and connect it to &quot;generator<em>A&quot; and &quot;generator</em>A_retro&quot;,</li><li>define the parameter <code>maximum_entities_invested_available</code>=&quot;1&quot;.</li></ol><p><img src="../retrofit_material/example_1_system_retrofit_unit.png" alt="Configuration of retrofitting unit"/></p><p>This way, &quot;generator<em>A</em>retro&quot; can only be invested in if &quot;generator_A&quot; is retired.</p><h3 id="Model-Structure"><a class="docs-heading-anchor" href="#Model-Structure">Model Structure</a><a id="Model-Structure-1"></a><a class="docs-heading-anchor-permalink" href="#Model-Structure" title="Permalink"></a></h3><p>For simplicity, the example model spans 20 hour with an hourly resolution for both operationa and investment. Investment decisions are modelled as continuous value by defining the paramter <code>unit_investment_variable_type</code>=&quot;unit<em>investment</em>variable<em>type</em>continuous&quot;.</p><p>The complete model configuration is provided below: <img src="../retrofit_material/example_1_system_complete.png" alt="Complete model specification"/></p><h2 id="Model-Results"><a class="docs-heading-anchor" href="#Model-Results">Model Results</a><a id="Model-Results-1"></a><a class="docs-heading-anchor-permalink" href="#Model-Results" title="Permalink"></a></h2><p>As expected, as of hour 5 when &quot;generator<em>A&quot; retires, the model invests in all capacity=80 of &quot;generator</em>A<em>retro&quot; to continue supplying &quot;demand</em>A&quot;, and in capcity=20 new installation &quot;generator<em>A</em>new&quot; for the residue demand. The results are illustrated below:</p><h3 id="Investment-Related-Variables"><a class="docs-heading-anchor" href="#Investment-Related-Variables">Investment Related Variables</a><a id="Investment-Related-Variables-1"></a><a class="docs-heading-anchor-permalink" href="#Investment-Related-Variables" title="Permalink"></a></h3><p><img src="../retrofit_material/example_1_results_units_invested.png" alt="Plot for units_invested"/> <img src="../retrofit_material/example_1_results_invested_available.png" alt="Plot for units_invested_available"/></p><h3 id="Operation-Related-Variables"><a class="docs-heading-anchor" href="#Operation-Related-Variables">Operation Related Variables</a><a id="Operation-Related-Variables-1"></a><a class="docs-heading-anchor-permalink" href="#Operation-Related-Variables" title="Permalink"></a></h3><p><img src="../retrofit_material/example_1_results_unit_flow.png" alt="Plot for unit_flow"/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../print_the_model/">« Print the model</a><a class="docs-footer-nextpage" href="../set_up_representative_days_for_investment_problems/">Set up representative days for investment problems »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Thursday 4 September 2025 14:06">Thursday 4 September 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
