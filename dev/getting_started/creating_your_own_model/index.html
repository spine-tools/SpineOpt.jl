<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Creating Your Own Model · SpineOpt.jl</title><meta name="title" content="Creating Your Own Model · SpineOpt.jl"/><meta property="og:title" content="Creating Your Own Model · SpineOpt.jl"/><meta property="twitter:title" content="Creating Your Own Model · SpineOpt.jl"/><meta name="description" content="Documentation for SpineOpt.jl."/><meta property="og:description" content="Documentation for SpineOpt.jl."/><meta property="twitter:description" content="Documentation for SpineOpt.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/style.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="SpineOpt.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">SpineOpt.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../installation/">Installation</a></li><li><a class="tocitem" href="../setup_workflow/">Setting up a workflow</a></li><li class="is-active"><a class="tocitem" href>Creating Your Own Model</a><ul class="internal"><li><a class="tocitem" href="#Creating-a-SpineOpt-model-instance"><span>Creating a SpineOpt model instance</span></a></li><li><a class="tocitem" href="#Add-parameter-values-to-the-model-instance"><span>Add parameter values to the model instance</span></a></li><li><a class="tocitem" href="#Add-other-necessary-objects-and-parameter-data-for-the-objects."><span>Add other necessary objects and parameter data for the objects.</span></a></li><li><a class="tocitem" href="#Define-temporal-and-stochastic-structures"><span>Define temporal and stochastic structures</span></a></li><li><a class="tocitem" href="#Define-the-spatial-structure"><span>Define the spatial structure</span></a></li><li><a class="tocitem" href="#Add-remaining-relationships-and-parameter-data-for-the-relationships."><span>Add remaining relationships and parameter data for the relationships.</span></a></li><li><a class="tocitem" href="#Run-the-model"><span>Run the model</span></a></li><li><a class="tocitem" href="#If-it-fails"><span>If it fails</span></a></li><li><a class="tocitem" href="#Explore-the-results"><span>Explore the results</span></a></li><li><a class="tocitem" href="#Create-and-run-scenarios-and-build-the-model-further"><span>Create and run scenarios and build the model further</span></a></li></ul></li><li><a class="tocitem" href="../archetypes/">Archetypes</a></li><li><a class="tocitem" href="../output_data/">Managing Outputs</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorial/webinars/">Webinars</a></li><li><a class="tocitem" href="../../tutorial/simple_system/">Simple system</a></li><li><a class="tocitem" href="../../tutorial/reserves/">Reserve requirements</a></li><li><a class="tocitem" href="../../tutorial/ramping/">Ramping constraints</a></li><li><a class="tocitem" href="../../tutorial/unit_commitment/">Unit Commitment</a></li><li><a class="tocitem" href="../../tutorial/tutorialTwoHydro/">Two hydro plants</a></li><li><a class="tocitem" href="../../tutorial/case_study_a5/">Case Study A5</a></li></ul></li><li><span class="tocitem">How to</span><ul><li><a class="tocitem" href="../../how_to/change_the_solver/">Change the solver</a></li><li><a class="tocitem" href="../../how_to/define_an_efficiency/">Define an efficiency</a></li><li><a class="tocitem" href="../../how_to/print_the_model/">Print the model</a></li></ul></li><li><span class="tocitem">Concept Reference</span><ul><li><a class="tocitem" href="../../concept_reference/the_basics/">Basics of the model structure</a></li><li><a class="tocitem" href="../../concept_reference/Object Classes/">Object Classes</a></li><li><a class="tocitem" href="../../concept_reference/Relationship Classes/">Relationship Classes</a></li><li><a class="tocitem" href="../../concept_reference/Parameters/">Parameters</a></li><li><a class="tocitem" href="../../concept_reference/Parameter Value Lists/">Parameter Value Lists</a></li></ul></li><li><span class="tocitem">Mathematical Formulation</span><ul><li><a class="tocitem" href="../../mathematical_formulation/variables/">Variables</a></li><li><a class="tocitem" href="../../mathematical_formulation/constraints_automatically_generated/">Constraints</a></li><li><a class="tocitem" href="../../mathematical_formulation/objective_function/">Objective</a></li></ul></li><li><span class="tocitem">Advanced Concepts</span><ul><li><a class="tocitem" href="../../advanced_concepts/temporal_framework/">Temporal Framework</a></li><li><a class="tocitem" href="../../advanced_concepts/stochastic_framework/">Stochastic Framework</a></li><li><a class="tocitem" href="../../advanced_concepts/unit_commitment/">Unit Commitment</a></li><li><a class="tocitem" href="../../advanced_concepts/ramping/">Ramping</a></li><li><a class="tocitem" href="../../advanced_concepts/reserves/">Reserves</a></li><li><a class="tocitem" href="../../advanced_concepts/investment_optimization/">Investment Optimization</a></li><li><a class="tocitem" href="../../advanced_concepts/user_constraints/">User Constraints</a></li><li><a class="tocitem" href="../../advanced_concepts/decomposition/">Decomposition</a></li><li><a class="tocitem" href="../../advanced_concepts/powerflow/">PTDF-Based Powerflow</a></li><li><a class="tocitem" href="../../advanced_concepts/pressure_driven_gas_transfer/">Pressure driven gas transfer</a></li><li><a class="tocitem" href="../../advanced_concepts/Lossless_DC_power_flow/">Lossless nodal DC power flows</a></li><li><a class="tocitem" href="../../advanced_concepts/representative_days_w_seasonal_storage/">Representative days with seasonal storages</a></li><li><a class="tocitem" href="../../advanced_concepts/cumulated_flow_restrictions/">Imposing renewable energy targets</a></li><li><a class="tocitem" href="../../advanced_concepts/mga/">Modelling to generate alternatives</a></li></ul></li><li><span class="tocitem">Implementation details</span><ul><li><a class="tocitem" href="../../implementation_details/documentation/">Documentation</a></li><li><a class="tocitem" href="../../implementation_details/how_does_the_model_update_itself/">How does the model update itself</a></li><li><a class="tocitem" href="../../implementation_details/how_to_write_a_constraint/">How to write a constraint</a></li><li><a class="tocitem" href="../../implementation_details/time_slices/">Time slices</a></li></ul></li><li><a class="tocitem" href="../../library/">Library</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Getting Started</a></li><li class="is-active"><a href>Creating Your Own Model</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Creating Your Own Model</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/spine-tools/SpineOpt.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/spine-tools/SpineOpt.jl/blob/master/docs/src/getting_started/creating_your_own_model.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Creating-Your-Own-Model"><a class="docs-heading-anchor" href="#Creating-Your-Own-Model">Creating Your Own Model</a><a id="Creating-Your-Own-Model-1"></a><a class="docs-heading-anchor-permalink" href="#Creating-Your-Own-Model" title="Permalink"></a></h1><p>This part of the guide shows first an example how to insert objects and their parameter data. Then it shows what other objects, relationships and parameter data needs to be added for a very basic model. Lastly, the model instance is run.</p><p>This section explains the process of creating a <em>SpineOpt.jl</em> model from scratch in order to give you an understanding of the underlying principles of the data structure, etc. If you simply want to try something out quickly to see results, check out the <a href="@ref">Example Models</a> section. Furthermore, if you&#39;re in a hurry, the <a href="../archetypes/#Archetypes">Archetypes</a> section provides you with some pre-made templates for the different parts of a <em>SpineOpt.jl</em> model to get you started quickly.</p><h2 id="Creating-a-SpineOpt-model-instance"><a class="docs-heading-anchor" href="#Creating-a-SpineOpt-model-instance">Creating a SpineOpt model instance</a><a id="Creating-a-SpineOpt-model-instance-1"></a><a class="docs-heading-anchor-permalink" href="#Creating-a-SpineOpt-model-instance" title="Permalink"></a></h2><ul><li>First, open the database editor by double-clicking the <em>Input DB</em>. </li><li>Right click on <em>model</em> in the <em>Object tree</em>. </li><li>Choose <em>Add objects</em>. </li><li>Then, add a model object by writing a name to the <em>object name</em> field. You can use e.g. <em>instance</em>. </li><li>Click ok.</li><li>The <a href="../../concept_reference/Object Classes/#model">model</a> object in SpineOpt is an abstraction that represents the model itself. Every SpineOpt database needs to have at least one <code>model</code> object.</li><li>The model object holds general information about the optimization. The whole range of functionalities is explained in <strong>Advanced Concepts</strong> chapter - in here a minimal set of parameters is used.</li></ul><p><img src="https://user-images.githubusercontent.com/40472544/114978841-880e8980-9e92-11eb-9272-5dc46708006f.png" alt="image"/></p><p><img src="https://user-images.githubusercontent.com/40472544/114978964-ba1feb80-9e92-11eb-9f73-14a6c11ad3bd.png" alt="image"/></p><h2 id="Add-parameter-values-to-the-model-instance"><a class="docs-heading-anchor" href="#Add-parameter-values-to-the-model-instance">Add parameter values to the model instance</a><a id="Add-parameter-values-to-the-model-instance-1"></a><a class="docs-heading-anchor-permalink" href="#Add-parameter-values-to-the-model-instance" title="Permalink"></a></h2><ul><li>Select the model object <code>instance</code> from the object tree.</li><li>Go to the <code>Object parameter value</code> tab.</li><li>Every parameter value belongs to a specific alternative. This allows to hold multiple values for the same parameter of a particular object. The alternative values are used to create scenarios. Choose, <code>Base</code> for all parameter values (<code>Base</code> is required in Spine Toolbox - all other alternatives can be chosen freely).</li><li>Then define a <code>model_start</code> time and a <code>model_end</code> time. <ul><li>Double-click on the empty row under <code>parameter_name</code> and select <a href="../../concept_reference/Parameters/#model_start">model_start</a>. </li><li>A <code>None</code> should appear in <code>value</code> column. </li><li>To asign a start date value, right-click on <code>None</code> and open the editor (cannot be entered directly, since the datatype needs to be changed). </li><li>The parameter type of <code>model_start</code> is of type <code>Datetime</code>. </li><li>Set the value to e.g. <code>2019-01-01T00:00:00</code>. </li><li>Proceed accordingly for the <a href="../../concept_reference/Parameters/#model_end">model_end</a>.  </li></ul></li></ul><p><img src="https://user-images.githubusercontent.com/40472544/115030082-5cf65b00-9ecf-11eb-84c3-9dc1c03d4627.png" alt="image"/> </p><p>Further reading on adding parameter values can be found <a href="https://spine-toolbox.readthedocs.io/en/latest/spine_db_editor/adding_data.html">here</a>.</p><h2 id="Add-other-necessary-objects-and-parameter-data-for-the-objects."><a class="docs-heading-anchor" href="#Add-other-necessary-objects-and-parameter-data-for-the-objects.">Add other necessary objects and parameter data for the objects.</a><a id="Add-other-necessary-objects-and-parameter-data-for-the-objects.-1"></a><a class="docs-heading-anchor-permalink" href="#Add-other-necessary-objects-and-parameter-data-for-the-objects." title="Permalink"></a></h2><ul><li>Add all objects and their parameter data by replicating what has been done in the picture below. Do it the same way as explained above with the following caveats.</li><li>Whilst most object names can be freely defined by the user, there is one object name in the example below that needs to be written exactly since it is used internally by SpineOpt: <code>unit_flow</code>. </li><li>The <code>parameter_name</code> can be selected from a drop down menu.</li><li>The date time and time series parameter data can be added by using right-click to access the <em>Edit...</em> dialog. When creating the time series, use the fixed resolution with <code>Start time</code> of the model run and with <code>1h</code> resolution. Then only values need to be entered (or copy pasted) and time stamps come automatically.</li><li>Parameter <code>balance_type</code> needs to have value <code>balance_type_none</code> in the gas node, since it allows the node to create energy (natural gas) against a price and therefore the energy balance is not maintained.</li></ul><p><img src="https://user-images.githubusercontent.com/40472544/115030258-8f07bd00-9ecf-11eb-80aa-a717ba5df2f0.png" alt="image"/></p><h2 id="Define-temporal-and-stochastic-structures"><a class="docs-heading-anchor" href="#Define-temporal-and-stochastic-structures">Define temporal and stochastic structures</a><a id="Define-temporal-and-stochastic-structures-1"></a><a class="docs-heading-anchor-permalink" href="#Define-temporal-and-stochastic-structures" title="Permalink"></a></h2><ul><li>To specify the temporal structure for SpineOpt, you need to define <a href="../../concept_reference/Object Classes/#temporal_block">temporal_block</a> objects. Think of a <code>temporal_block</code> as a distinctive way of &#39;slicing&#39; time across the model horizon.</li><li>To link the temporal structure to the spatial structure, you need to specify <a href="../../concept_reference/Relationship Classes/#node__temporal_block">node__temporal_block</a> relationships, establishing which <code>temporal__block</code> applies to each <code>node</code>. This relationship is added by right-clicking the <code>node__temporal_block</code> in the relationship tree and then using the <code>add relationships...</code> dialog. Double clicking on an empty cell gives you the list of valid objects. The relationship name is automatically formed, but you can change it if that is desirable.</li><li>To keep things simple at this point, let&#39;s just define one <code>temporal_block</code> for our model and apply it to all <code>nodes</code>. We add the object <code>hourly_temporal_block</code> of type <code>temporal_block</code> following the same procedure as before and establish <code>node__temporal_block</code> relationships between <code>node_gas</code> and <code>hourly_temporal_block</code>, and <code>electricity_node</code> and <code>hourly_temporal_block</code>.</li><li>In practical terms, the above means that there energy flows over <code>gas_node</code> and <code>electricity_node</code> for each &#39;time-slice&#39; comprised in <code>hourly_temporal_block</code>.</li><li>Similarly with the stochastic structure, each node is assigned a <code>deterministic</code> <code>stochastic_structure</code>. </li></ul><h2 id="Define-the-spatial-structure"><a class="docs-heading-anchor" href="#Define-the-spatial-structure">Define the spatial structure</a><a id="Define-the-spatial-structure-1"></a><a class="docs-heading-anchor-permalink" href="#Define-the-spatial-structure" title="Permalink"></a></h2><ul><li>To specify the spatial structure for SpineOpt, you will need to use the <a href="../../concept_reference/Object Classes/#node">node</a>, <a href="../../concept_reference/Object Classes/#unit">unit</a>, and <a href="../../concept_reference/Object Classes/#connection">connection</a> objects added before.</li><li>Nodes can be understood as spatial aggregators. In combination with units and connections, they form the energy network.</li><li>Units in SpineOpt represent any kind of conversion process. As one example, a unit can represent a power plant that converts the flow of a commodity fuel into an electricity and/or heat flow.</li><li>Connections on the other hand describe the transport of goods from one location to another. Electricity lines and gas pipelines are examples of such connections. This example does not use connections.</li><li>The database should have an object <code>gas_turbine</code> for the <code>unit</code> object class and objects <code>node_gas</code> and <code>node_elec</code> for the <code>node</code> object class.</li><li>Next, define how the <code>unit</code> and the <code>nodes</code> interact with each other: create a <a href="../../concept_reference/Relationship Classes/#unit__from_node">unit__from_node</a> relationship between <code>gas_turbine</code> and <code>node_gas</code>, and <a href="../../concept_reference/Relationship Classes/#unit__to_node">unit__to_node</a> relationships between <code>gas_turbine</code> and <code>node_elec</code>.</li><li>In practical terms, the above means that there is an energy flow going from <code>node_gas</code> into <code>node_elec</code>, through the <code>gas_turbine</code>.</li></ul><h2 id="Add-remaining-relationships-and-parameter-data-for-the-relationships."><a class="docs-heading-anchor" href="#Add-remaining-relationships-and-parameter-data-for-the-relationships.">Add remaining relationships and parameter data for the relationships.</a><a id="Add-remaining-relationships-and-parameter-data-for-the-relationships.-1"></a><a class="docs-heading-anchor-permalink" href="#Add-remaining-relationships-and-parameter-data-for-the-relationships." title="Permalink"></a></h2><ul><li>Similar to adding the objects and their parameter data, add the relationships and their parameter data based on the picture below. </li><li>The capacity of the gas_turbine has to be sufficient to meet the highest demand for electricity, otherwise the model will be infeasible (it is possible to set penalty values, but they are not included in this example).</li><li>The parameter <code>fix_ratio_in_out_unit_flow</code> forces the ratio between an input and output flow to be a constant. This is one way to establish an efficiency for a conversion process.</li></ul><p><img src="https://user-images.githubusercontent.com/40472544/116714620-9dc99600-a9de-11eb-869f-60bf84482888.png" alt="image"/></p><h2 id="Run-the-model"><a class="docs-heading-anchor" href="#Run-the-model">Run the model</a><a id="Run-the-model-1"></a><a class="docs-heading-anchor-permalink" href="#Run-the-model" title="Permalink"></a></h2><ul><li>Select <em>SpineOpt</em> </li><li>Press <em>Execute selection</em>.</li></ul><p><img src="https://user-images.githubusercontent.com/40472544/115010605-48599900-9eb6-11eb-930d-b2a258b61bf7.png" alt="image"/></p><h2 id="If-it-fails"><a class="docs-heading-anchor" href="#If-it-fails">If it fails</a><a id="If-it-fails-1"></a><a class="docs-heading-anchor-permalink" href="#If-it-fails" title="Permalink"></a></h2><ul><li>Double-check that the data is correct</li><li>Try to see what the problem might be</li><li>Ask help from the <a href="https://github.com/Spine-project/SpineOpt.jl/discussions">discussion forum</a></li></ul><h2 id="Explore-the-results"><a class="docs-heading-anchor" href="#Explore-the-results">Explore the results</a><a id="Explore-the-results-1"></a><a class="docs-heading-anchor-permalink" href="#Explore-the-results" title="Permalink"></a></h2><ul><li>Double-clicking the <em>Results</em> database.</li></ul><p><img src="https://user-images.githubusercontent.com/40472544/115010687-5d362c80-9eb6-11eb-8542-93a765c186cf.png" alt="image"/> </p><h2 id="Create-and-run-scenarios-and-build-the-model-further"><a class="docs-heading-anchor" href="#Create-and-run-scenarios-and-build-the-model-further">Create and run scenarios and build the model further</a><a id="Create-and-run-scenarios-and-build-the-model-further-1"></a><a class="docs-heading-anchor-permalink" href="#Create-and-run-scenarios-and-build-the-model-further" title="Permalink"></a></h2><ul><li>Create a new alternative</li><li>Add parameter data for the new alternative</li><li>Connect alternatives under a scenario. Toolbox modifies <code>Base</code> data with the data from the alternatives in the same scenario.</li><li>Execute multiple scenarios in parallel. First run in a new Julia instance will need to compile SpineOpt taking some time.</li></ul><p><img src="https://user-images.githubusercontent.com/40472544/116698265-d3658380-a9cc-11eb-9408-c46a9e06de74.png" alt="image"/></p><p><img src="https://user-images.githubusercontent.com/40472544/115011214-0da43080-9eb7-11eb-93e5-e2991e81b429.png" alt="image"/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../setup_workflow/">« Setting up a workflow</a><a class="docs-footer-nextpage" href="../archetypes/">Archetypes »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Wednesday 13 March 2024 11:44">Wednesday 13 March 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
